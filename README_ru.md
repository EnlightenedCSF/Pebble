# Nautical

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã—Ö Telegram-–±–æ—Ç–æ–≤ –∏–∑ Python-—Ñ—É–Ω–∫—Ü–∏–π.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#–£—Å—Ç–∞–Ω–æ–≤–∫–∞)
* [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](#–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ)
    * [0. Start, help –∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é](#Start-help-–∏-–¥—Ä—É–≥–∏–µ-–∫–æ–º–∞–Ω–¥—ã-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
    * [1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–º–∞–Ω–¥](#1-–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-–∫–æ–º–º–∞–Ω–¥)
    * [2. –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é](#2-–û—Ç–ø—Ä–∞–≤–∫–∞-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
    * [3. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º](#3-–ó–∞–≥—Ä—É–∑–∫–∞-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
    * [4. –ö–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤](#4-–ö–æ–Ω—Ç—Ä–æ–ª—å-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-—Ñ—É–Ω–∫—Ü–∏–π-—Å-–ø–æ–º–æ—â—å—é-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
    * [5. –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫](#5-–†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–Ω–∞-–Ω–∞–∂–∞—Ç–∏—è-–∫–Ω–æ–ø–æ–∫)
    * [6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ SQLite](#6-–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-—Å–æ–±—ã—Ç–∏–π-–≤-SQLite)
* [–ê–≤—Ç–æ—Ä—ã](#–ê–≤—Ç–æ—Ä—ã)


## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

```bash
git clone https://github.com/olferuk/Nautical.git
cd <cloned_repo>
pip install .
```

## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
```python
from nautical.bot import TelegramBot
from nautical.message import Message

bot = TelegramBot(token='<YOUR_TOKEN>', config_path='./config.db')
```

### 0. Start, help –∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Å–Ω–∏–ø–ø–µ—Ç–µ –≤—ã—à–µ. –í–∞—à —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å, –æ–±—Ä–∞—Ç–∏–≤—à–∏—Å—å –∫ –±–æ—Ç—É @bot_father –≤ –¢–µ–ª–µ–≥—Ä–∞–º–µ.

–ë–æ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º:

```bash
> /start

Hello and welcome! Start using me right away or ask for /help :)

> /help

The available commands are:
‚Üí /start: Shows the starting dialog
‚Üí /help: Shows this message
‚Üí /set <param> <x>: Sets parameter <param> to value <x>. Like `/set a 4`
‚Üí /params: Shows list of all specified parameters
```

–¶–µ–ª—å –∫–æ–º–∞–Ω–¥ `/set` –∏ `/params` - –¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±–æ—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º" –±–æ—Ç–∞.

–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥ `/start` –∏ `/help`, –∫–æ–Ω–µ—á–Ω–æ, —Ç–æ–∂–µ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å:

```python
bot.starting_message = '–î—Ä—É–≥–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'

bot.help_message = '–î—Ä—É–≥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∫–æ–º–º–∞–Ω–¥–∞—Ö'
```

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–º–∞–Ω–¥
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

```python
def hello_world():
    return Message(text='Hello world!')

bot.register_command('hello', hello_world)
```

–í—ã –º–æ–∂–µ—Ç–µ —Å—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã:

```bash
> /hello

Hello, world!
```

### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

–£ –∫–ª–∞—Å—Å–∞ `Message` –µ—Å—Ç—å –¥–≤–∞ –ø–æ–ª—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: `image` –∏ `image_url`.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `image`, —á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ñ–∞–π–ª–æ–º —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–≤ `image` –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –∫–∞—Ä—Ç–∏–Ω–∫–µ),
–∞ –¥–ª—è —Å—Å—ã–ª–æ–∫ –∏–∑ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –ø–æ–ª–µ `image_url`.

–ü—Ä–∏–º–µ—Ä:

```python
def local_funny_meme():
    return Message(image='/Users/yourName/path/to/a/meme')

bot.register_command('local_meme', local_funny_meme)


def funny_online_meme():
    return Message(image_url='https://sun1-16.userapi.com/c849332/v849332281/1207ee/tI9a_zqqY0U.jpg')

bot.register_command('online_meme', funny_online_meme)
```

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

–†–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ:

```python
def process_photo(img):
  print('–ü–æ–ª—É—á–∏–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º {}'.format(img))

bot.register_photo_handler(process_photo)
```

–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ñ—É–Ω–∫—Ü–∏—è `process_photo` –ø–æ–ª—É—á–∏—Ç –Ω–∞ –≤—Ö–æ–¥, –∏–º–µ–µ—Ç —Ç–∏–ø `PIL.JpegImagePlugin.JpegImageFile`.

### 4. –ö–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞, Nautical –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```python
def function_to_control(config):
  x = int(config['x'])
  print('–ó–Ω–∞—á–µ–Ω–∏–µ x —Ä–∞–≤–Ω–æ {}'.format(x))
  if x > 5:
    return Message(text='x –±–æ–ª—å—à–µ 5')
  return Message(text='x –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–µ–Ω 5')

bot.register_command('test', function_to_control)
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `function_to_control` –º–æ–∂–µ—Ç –∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å `config`: —Ç–æ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ–π
–ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã. –ï—Å–ª–∏ –∂–µ –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–¥–∞–Ω, —Ç—É–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã,
–∫–∞–∫ –ø–µ—Ä–≤–æ–º—É –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–º—É –∞—Ä–≥—É–º–µ–Ω—Ç—É.

–í —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```bash
> /set x 2

Successfully set parameter "x" to "2"

> /test

x –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–µ–Ω 5

> /set x 10

Successfully set parameter "x" to "10"

> /test

x –±–æ–ª—å—à–µ 5
```

__NB__: –Ω–∞–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —É –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π, –∏ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
–æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –±–æ—Ç–∞ —É –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ SQLite-—Ñ–∞–π–ª–µ, –∏–º—è –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –∑–∞–¥–∞–µ—Ç–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `config_path`.

### 5. –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ:

```python
def joke():
    return Message(message='A bear once met a burning car in the forest. He sat in it and burned alive.',
                   buttons=['üòÄ Ahahah', 'üòí Meh'])

bot.register_command('joke', joke)
```

–û–Ω–∏ –Ω—É–∂–Ω—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç—Ä–µ–∫–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–∞–∫ –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫ –ø–æ–∫–∞ –Ω–µ–ª—å–∑—è. Stay tuned!

### 6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ SQLite
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

–ß—Ç–æ–±—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∑–Ω–∞—Ç—å, —á—Ç–æ –¥–µ–ª–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞, –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.

#### 6.1. –ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ:

```python
bot = TelegramBot(token='<YOUR_TOKEN>', config_path='config.db', db_path='logs.db')

def hello():
  return Message('Hello world!')

def greet(config):
  return Message('Hello, {}!'.format(config['name']))


bot.register_command('hello', hello)
bot.register_command('greet', greet)

# Later in the Telegram:

> /hello

Hello, world!

> /set name Alex

Parameter "name" successfully set to "Alex"

> /greet

Hello, Alex!
```

–û—Ç–∫—Ä—ã–≤ —Ñ–∞–π–ª `logs.db`, –º–æ–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å 2 —Ç–∞–±–ª–∏—Ü—ã: `user` –∏ `record`. –í `user` –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å,
–∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø–∏—Å–∞–ª –±–æ—Ç—É:

| __user_id__  | __user_name__ | __first_name__ | __last_name__ |
|--------------|---------------|----------------|---------------|
| 81910644     |               | Alexander      | Olferuk       |

–ê –≤ `record` - –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è:

| __user_id__ | __chat_id__ | __message_id__ | __dt__              | __message__    | __is_image__ | __meta__ | __button__ |
|-------------|-------------|----------------|---------------------|----------------|--------------|----------|------------|
| 81910644    | 81910628    | 598            | 2019-02-06 15:49:06 | /hello         | 0            |          |            |
| 81910644    | 81910628    | 600            | 2019-02-06 15:49:15 | /set name Alex | 0            |          |            |
| 81910644    | 81910628    | 602            | 2019-02-06 15:49:22 | /greet         | 0            |          |            |

#### 6.2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—è meta

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –±–æ—Ç –ø–æ –∫–æ–º–∞–Ω–¥–µ `/joke` –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞–≤–∞—Ç—å –æ–¥–Ω—É –∏–∑ –º–∏–ª–ª–∏–æ–Ω–∞ —Å–º–µ—à–Ω—ã—Ö —à—É—Ç–æ–∫, –∞ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ,
–∫–∞–∫–∏–µ —à—É—Ç–∫–∏ –∫–∞–∫–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –º—ã —É–∂–µ –ø–æ–∫–∞–∑–∞–ª–∏. –°–∞–º—É —à—É—Ç–∫—É, –∫–æ–Ω–µ—á–Ω–æ, –º—ã –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –Ω–µ –±—É–¥–µ–º, –∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—ë –∏–Ω–¥–µ–∫—Å
–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤–ø–æ–ª–Ω–µ –º–æ–∂–µ–º. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–ª–µ–º `meta`:

```python
JOKES = [...]

def show_random_joke():
  index = np.random.randint(len(JOKES))
  return Message(JOKES[index], meta=index)

bot.register_command('joke', show_random_joke)
```

–°–º–æ—Ç—Ä–∏–º —Ç–∞–±–ª–∏—á–∫—É `record`:

| __user_id__ | __chat_id__ | __message_id__ | __dt__              | __message__    | __is_image__ | __meta__ | __button__ |
|-------------|-------------|----------------|---------------------|----------------|--------------|----------|------------|
| 81910644    | 81910628    | 604            | 2019-02-06 16:18:08 | /joke          | 0            | 5        |            |
| 81910644    | 81910628    | 606            | 2019-02-06 16:18:11 | /joke          | 0            | 7        |            |
| 81910644    | 81910628    | 608            | 2019-02-06 16:18:15 | /joke          | 0            | 0        |            |

#### 6.3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏

–í–µ—Ä–Ω–µ–º—Å—è –∫ –ø—Ä–∏–º–µ—Ä—É —Å —à—É—Ç–∫–æ–π –ø—Ä–æ –º–µ–¥–≤–µ–¥—è:

```python
def joke():
    return Message(message='A bear once met a burning car in the forest. He sat in it and burned alive.',
                   buttons=['üòÄ Ahahah', 'üòí Meh'])

bot.register_command('bear', joke)
```

–ö–Ω–æ–ø–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è, –Ω–∞ –Ω–∏—Ö –Ω–∞–∂–∞—Ç—å –º–æ–∂–Ω–æ, –∏ —ç—Ç–æ –±—É–¥–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ:

| __user_id__ | __chat_id__ | __message_id__ | __dt__              | __message__    | __is_image__ | __meta__ | __button__ |
|-------------|-------------|----------------|---------------------|----------------|--------------|----------|------------|
| 81910644    | 81910628    | 610            | 2019-02-06 16:22:10 | /bear          |  0           |          |           |
| 81910644    | 81910628    | 610            | 2019-02-06 16:22:10 |                |  0           |          | üòí Meh     |
| 81910644    | 81910628    | 613            | 2019-02-06 16:22:16 | /bear          |  0           |          |           |
| 81910644    | 81910628    | 613            | 2019-02-06 16:22:16 |                |  0           |          | üòÄ Ahahah  |

–ê –ø–æ —Ç–æ–º—É, —á—Ç–æ —É –ø–∞—Ä "—Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞" - "—Ä–µ–∞–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π `message_id`, –ª–µ–≥–∫–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –∫–∞–∫–∞—è —Ä–µ–∞–∫—Ü–∏—è –∫ –∫–∞–∫–æ–º—É
—Å–æ–æ–±—â–µ–Ω–∏—é –æ—Ç–Ω–æ—Å–∏—Ç—Å—è.

## –ê–≤—Ç–æ—Ä—ã
[–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é](#–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

* –û–ª—å—Ñ–µ—Ä—É–∫ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä ( [vk](https://vk.com/a_olferuk) | [github](https://github.com/EnlightenedCSF) )
* –ü–∞–ª—É—Ö–∏–Ω –î–∞–Ω–∏–ª–∞ ( [vk](https://vk.com/dpaluhin) | [github](https://github.com/Palushok) )
